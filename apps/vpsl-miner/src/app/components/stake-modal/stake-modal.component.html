<form [formGroup]="stakeForm">
  <mat-dialog-content class="stake-modal-content">
    <button class="absolute top-0 right-0" (click)="onNoClick()">
      <mat-icon class="text-2xl text-dfus-gray-light" aria-hidden="false" fontIcon="close" />
    </button>

    <div class="w-full flex flex-col justify-start items-start md:flex-row md:justify-center gap-2 mb-6">
      <h3 class="font-medium">Stake <span class="text-dfus-orange">$VFSN</span></h3>
    </div>

    <div class="mb-5 max-w-[650px] mx-auto">
      <p class="text-xs">Available Balance</p>
      <p class="text-base font-bold">{{ availableVFSNBalance }} VFSN</p>
    </div>

    <div class="stake-amount-container section-container max-w-[650px] !h-[200px] mx-auto flex flex-col gap-y-5 p-6 mb-5">
      <div class="text-base font-bold">Staking Amount</div>
      <div class="flex items-center gap-8">
        <mat-form-field class="w-full h-14" appearance="outline">
          <mat-label class="stake-amount-label text-dfus-gray-medium">Enter staking amount</mat-label>
          <input matInput type="text" formControlName="stakeAmount" class="!px-3" min="0" (input)="validateNumericInput($event)" />
        </mat-form-field>

        <button class="dfus-blue-btn h-14 min-w-28 hover:border-white" (click)="stakeAll()">Stake All</button>
      </div>

      <mat-error
        class="!flex items-center !text-dfus-error !text-sm !p-0 !py-1"
        *ngIf="stakeForm.get('stakeAmount')?.hasError('required') && stakeForm.get('stakeAmount')?.touched; else otherErrors"
      >
        <img class="mr-2" src="icons/hint_error.svg" alt="Hint error icon" /> Staking amount is required
      </mat-error>

      <ng-template #otherErrors>
        <mat-error
          class="!flex items-center !text-dfus-error !text-sm !p-0 !py-1"
          *ngIf="stakeForm.get('stakeAmount')?.hasError('positiveNumber') && stakeForm.get('stakeAmount')?.touched; else maxBalanceError"
        >
          <img class="mr-2" src="icons/hint_error.svg" alt="Hint error icon" /> Staking amount must be greater than 0
        </mat-error>

        <ng-template #maxBalanceError>
          <mat-error
            class="!flex items-center !text-dfus-error !text-sm !p-0 !py-1"
            *ngIf="stakeForm.get('stakeAmount')?.hasError('maxBalance') && stakeForm.get('stakeAmount')?.touched"
          >
            <img class="mr-2" src="icons/hint_error.svg" alt="Hint error icon" /> Staking amount cannot be higher than available balance
          </mat-error>
        </ng-template>
      </ng-template>
    </div>

    <div class="section-container max-w-[650px] mx-auto flex flex-col gap-y-5 p-5">
      <div class="text-base font-bold">Staking Period</div>
      <div class="flex items-center mb-2">
        <mat-form-field class="w-full h-14" appearance="outline">
          <mat-label class="text-dfus-gray-medium">Days staked</mat-label>
          <input class="!px-3" matInput type="number" value="{{ stakePeriod }}" readonly />
        </mat-form-field>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(7)">7 Days</button>
        <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(30)">30 Days</button>
        <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(60)">60 Days</button>
        <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(90)">90 Days</button>
      </div>
    </div>
  </mat-dialog-content>
  <mat-dialog-actions>
    <div class="max-w-[650px] mx-auto">
      <mat-checkbox formControlName="agree" class="example-margin">
        <span class="flex items-center text-base">I confirm that the information entered is accurate and agree to the terms and conditions of staking.</span>
      </mat-checkbox>

      <button class="bg-dfus-bg-dark text-white py-2 px-6 rounded-lg w-full text-base mt-5" [disabled]="stakeForm.invalid" (click)="onOpenPasswordDialog()">
        Stake &gt;
      </button>
    </div>
  </mat-dialog-actions>
</form>
