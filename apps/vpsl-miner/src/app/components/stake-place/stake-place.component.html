<form [formGroup]="stakeForm">
  <div class="w-full flex flex-col justify-between items-center md:flex-row gap-2 mb-6 max-w-[650px] mx-auto">
    <h3 class="font-medium">Stake <span class="text-dfus-orange">$VFSN</span></h3>

    <app-wallet-button></app-wallet-button>
  </div>

  <div class="mb-5 max-w-[650px] mx-auto">
    <h4 class="text-2xl">Available Balance</h4>
    <h2 class="font-semibold text-4xl">{{ availableVFSNBalance }} VFSN</h2>
  </div>

  <div *ngIf="isHotWallet" class="flex flex-col justify-start items-stretch gap-y-2 mb-8 mt-3 p-4 text-left notification-container max-w-[650px] mx-auto">
    <div class="flex flex-row justify-start items-center gap-x-2 text-base font-semibold">
      <img src="icons/info.svg" alt="Important notification icon" />
      <span>Important Note</span>
    </div>
    <p class="text-base">
      To continue staking, please import the hot wallet address you set up into your wallet and connect using that address to approve the staking transaction
      request.
    </p>
  </div>

  <div class="stake-amount-container section-container max-w-[650px] !h-[200px] mx-auto flex flex-col gap-y-5 p-6 mb-5">
    <div class="flex items-end gap-8">
      <div class="w-full">
        <label for="stake-amount-input" class="dfus-input-label !mb-4">Staking Amount</label>
        <input
          type="text"
          id="stake-amount-input"
          formControlName="stakeAmount"
          class="dfus-input !h-14"
          (input)="validateNumericInput($event)"
          placeholder="Enter amount to stake"
        />
      </div>

      <button class="dfus-blue-btn h-14 min-w-28 hover:border-white" (click)="stakeAll()">Stake All</button>
    </div>

    <mat-error
      class="!flex items-center !text-dfus-error !text-sm !p-0 !py-1"
      *ngIf="stakeForm.get('stakeAmount')?.hasError('required') && stakeForm.get('stakeAmount')?.touched; else otherErrors"
    >
      <img class="mr-2" src="icons/hint_error.svg" alt="Hint error icon" /> Staking amount is required
    </mat-error>

    <ng-template #otherErrors>
      <mat-error
        class="!flex items-center !text-dfus-error !text-sm !p-0 !py-1"
        *ngIf="stakeForm.get('stakeAmount')?.hasError('positiveNumber') && stakeForm.get('stakeAmount')?.touched; else maxBalanceError"
      >
        <img class="mr-2" src="icons/hint_error.svg" alt="Hint error icon" /> Staking amount must be greater than 0
      </mat-error>

      <ng-template #maxBalanceError>
        <mat-error
          class="!flex items-center !text-dfus-error !text-sm !p-0 !py-1"
          *ngIf="stakeForm.get('stakeAmount')?.hasError('maxBalance') && stakeForm.get('stakeAmount')?.touched"
        >
          <img class="mr-2" src="icons/hint_error.svg" alt="Hint error icon" /> Staking amount cannot be higher than available balance
        </mat-error>
      </ng-template>
    </ng-template>
  </div>

  <div class="section-container max-w-[650px] mx-auto flex flex-col gap-y-5 p-5">
    <div class="text-base font-bold">Staking Period</div>
    <div class="flex items-center mb-2">
      <div class="w-full">
        <label for="days-staked-input" class="dfus-input-label">Days staked</label>
        <input type="number" id="days-staked-input" class="dfus-input !h-14" [value]="stakePeriod" readonly placeholder="Days staked" />
      </div>
    </div>
    <div class="grid grid-cols-2 gap-4">
      <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(7)" [class.!border-dfus-orange]="stakePeriod === 7">7 Days</button>
      <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(30)" [class.!border-dfus-orange]="stakePeriod === 30">30 Days</button>
      <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(60)" [class.!border-dfus-orange]="stakePeriod === 60">60 Days</button>
      <button class="dfus-blue-btn hover:border-white" (click)="updateStakePeriod(90)" [class.!border-dfus-orange]="stakePeriod === 90">90 Days</button>
    </div>
  </div>
  <div class="max-w-[650px] mx-auto mt-7">
    <mat-checkbox formControlName="agree" class="example-margin">
      <span class="flex items-center text-base">I confirm that the information entered is accurate and agree to the terms and conditions of staking.</span>
    </mat-checkbox>

    <button
      class="dfus-orange-btn text-white py-2 px-6 rounded-lg w-full h-12 text-base mt-5 mb-7"
      [class.bg-dfus-bg-dark]="stakeForm.invalid || isHotWallet"
      [class.cursor-not-allowed]="stakeForm.invalid || isHotWallet"
      [disabled]="stakeForm.invalid || isHotWallet"
      (click)="stakeCoins()"
    >
      Stake &gt;
    </button>
  </div>
</form>
